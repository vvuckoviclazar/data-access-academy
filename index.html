<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quiz</title>
  </head>
  <body>
    <main id="quiz"></main>

    <script type="application/json" id="quiz-data">
      {
        "quiz": {
          "q1": {
            "question": "Which one is correct team name in NBA?",
            "options": [
              "New York Bulls",
              "Los Angeles Kings",
              "Golden State Warriros",
              "Huston Rocket"
            ],
            "answer": "Huston Rocket"
          },
          "q2": {
            "question": "'Namaste' is a traditional greeting in which Asian language?",
            "options": ["Hindi", "Mandarin", "Nepalese", "Thai"],
            "answer": "Hindi"
          },
          "q3": {
            "question": "The Spree river flows through which major European capital city?",
            "options": ["Berlin", "Paris", "Rome", "London"],
            "answer": "Berlin"
          },
          "q4": {
            "question": "Which famous artist had both a 'Rose Period' and a 'Blue Period'?",
            "options": [
              "Pablo Picasso",
              "Vincent van Gogh",
              "Salvador Dal√≠",
              "Edgar Degas"
            ],
            "answer": "Pablo Picasso"
          }
        }
      }
    </script>


    <script>
      (function () {
        const LS_KEY = "quizAnswers";
        const container = document.getElementById("quiz");


        const raw = document.getElementById("quiz-data").textContent.trim();
        let data;
        try {
          data = JSON.parse(raw);
        } catch (e) {
          console.error("Invalid JSON:", e);
          return;
        }


        function loadAnswers() {
          try {
            return JSON.parse(localStorage.getItem(LS_KEY)) || {};
          } catch {
            return {};
          }
        }
        function saveAnswers(answers) {
          localStorage.setItem(LS_KEY, JSON.stringify(answers));
        }

        const answers = loadAnswers();
        const entries = Object.entries(data.quiz).sort(
          ([a], [b]) => parseInt(a.slice(1), 10) - parseInt(b.slice(1), 10)
        );

        entries.forEach(([qid, q], idx) => {
          const section = document.createElement("section");

          const h = document.createElement("h2");
          h.textContent = `Question ${idx + 1}: ${q.question}`;
          section.appendChild(h);

          const ul = document.createElement("ul");

          q.options.forEach((opt, i) => {
            const li = document.createElement("li");

            const id = `${qid}-${i}`;
            const input = document.createElement("input");
            input.type = "radio";
            input.name = qid; 
            input.id = id;
            input.value = opt;

        
            if (answers[qid] === opt) input.checked = true;

            input.addEventListener("change", () => {
              answers[qid] = opt;
              saveAnswers(answers);
            });

            const label = document.createElement("label");
            label.setAttribute("for", id);
            label.textContent = opt;

            li.appendChild(input);
            li.appendChild(document.createTextNode(" "));
            li.appendChild(label);
            ul.appendChild(li);
          });

          section.appendChild(ul);
          container.appendChild(section);
        });
      })();
    </script>
  </body>
</html>
